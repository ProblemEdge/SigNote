<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S1gNqte - è¨˜å·ã¨ã‚¿ã‚°ã§æ€è€ƒã‚’æ•´ç†ã™ã‚‹SNS</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Hiragino Sans', 'Yu Gothic', sans-serif;
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            min-height: 100vh;
            color: #212529;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 20px;
            border: 1px solid rgba(0, 0, 0, 0.05);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #212529;
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: none;
        }

        .header p {
            color: #6c757d;
            font-size: 1.1rem;
        }

        .post-composer {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .ocr-section {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px dashed #dee2e6;
        }

        .ocr-section h4 {
            margin-bottom: 15px;
            color: #495057;
        }

        .upload-area {
            border: 2px dashed #0066FF;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
        }

        .upload-area:hover {
            background: #f0f8ff;
            border-color: #0052CC;
        }

        .upload-area.dragover {
            background: #e6f3ff;
            border-color: #0052CC;
            transform: scale(1.02);
        }

        .upload-content .upload-icon {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .upload-content p {
            margin: 0 0 5px 0;
            font-weight: 500;
            color: #495057;
        }

        .upload-content small {
            color: #6c757d;
        }

        .ocr-result {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border-left: 4px solid #28a745;
        }

        .ocr-result h5 {
            margin: 0 0 10px 0;
            color: #28a745;
        }

        .ocr-text {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            margin-bottom: 10px;
            border: 1px solid #dee2e6;
            min-height: 60px;
        }

        .apply-ocr-btn {
            background: #28a745;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .apply-ocr-btn:hover {
            background: #218838;
            transform: translateY(-1px);
        }

        .processing {
            text-align: center;
            color: #0066FF;
            font-style: italic;
        }

        .processing::after {
            content: '...';
            animation: dots 1.5s infinite;
        }

        @keyframes dots {
            0%, 20% { content: ''; }
            40% { content: '.'; }
            60% { content: '..'; }
            80%, 100% { content: '...'; }
        }

        .symbol-toolbar {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .symbol-btn {
            background: white;
            border: 1px solid #dee2e6;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            color: #212529;
        }

        .symbol-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 102, 255, 0.15);
            background: #0066FF;
            color: white;
            border-color: #0066FF;
        }

        .symbol-btn:active {
            transform: translateY(0);
        }

        .post-input {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'Courier New', monospace;
            resize: vertical;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .post-input:focus {
            outline: none;
            border-color: #0066FF;
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
            background: white;
        }

        .tag-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 0.9rem;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        .tag-input:focus {
            outline: none;
            border-color: #0066FF;
            background: white;
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        .post-btn {
            background: #0066FF;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 102, 255, 0.3);
        }

        .post-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 102, 255, 0.4);
            background: #0052CC;
        }

        .posts {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .post {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border-left: 4px solid #0066FF;
            transition: all 0.3s ease;
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .post:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .post-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .post-user {
            font-weight: bold;
            color: #212529;
        }

        .post-time {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .post-content {
            font-family: 'Courier New', monospace;
            line-height: 1.6;
            white-space: pre-wrap;
            margin-bottom: 15px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #0066FF;
            color: #212529;
        }

        .post-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: #212529;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tag:hover {
            transform: scale(1.05);
            background: #0066FF;
            box-shadow: 0 2px 8px rgba(0, 102, 255, 0.3);
        }

        .search-filter {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(0, 0, 0, 0.05);
        }

        .search-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            margin-bottom: 15px;
            background: #fafafa;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #0066FF;
            background: white;
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        .filter-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .filter-tag {
            background: #f0f0f0;
            color: #333;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .filter-tag:hover {
            background: #e0e0e0;
        }

        .filter-tag.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #4a5ed1;
        }

        .symbol-guide {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }

        .guide-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .guide-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #667eea;
        }

        .guide-symbol {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .guide-name {
            font-weight: bold;
            margin: 5px 0;
        }

        .guide-desc {
            font-size: 0.9rem;
            color: #666;
        }

        .message {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 0.9rem;
            transform: translateX(300px);
            transition: transform 0.3s ease;
            z-index: 1000;
        }

        .message.show {
            transform: translateX(0);
        }

        @media (max-width: 600px) {
            .container {
                padding: 10px;
            }
            
            .symbol-toolbar {
                gap: 5px;
            }
            
            .symbol-btn {
                font-size: 1rem;
                padding: 6px 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ§  SigNote</h1>
            <p>è¨˜å·ã¨ã‚¿ã‚°ã§æ€è€ƒã‚’æ•´ç†ãƒ»å…±æœ‰ã™ã‚‹SNS</p>
        </div>

        <div class="symbol-guide">
            <h3>ğŸ“‹ è¨˜å·ã‚¬ã‚¤ãƒ‰</h3>
            <div class="guide-grid">
                <div class="guide-item">
                    <div class="guide-symbol">â—</div>
                    <div class="guide-name">#core</div>
                    <div class="guide-desc">é‡è¦ãƒ»ä¸­å¿ƒãƒ»ä¸»å¼µã®æ ¸</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â†’</div>
                    <div class="guide-name">#flow</div>
                    <div class="guide-desc">ç‰©äº‹ã®é †ç•ªãƒ»å› æœé–¢ä¿‚</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â–¢</div>
                    <div class="guide-name">#block</div>
                    <div class="guide-desc">æ¦‚å¿µãƒ»è©±é¡Œãƒ»ãƒ†ãƒ¼ãƒã®æ çµ„ã¿</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â˜…</div>
                    <div class="guide-name">#highlight</div>
                    <div class="guide-desc">å°è±¡ãƒ»æ³¨ç›®ãƒã‚¤ãƒ³ãƒˆ</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â†º</div>
                    <div class="guide-name">#loop</div>
                    <div class="guide-desc">è¦‹ç›´ã—ãƒ»æ”¹å–„ãƒ»åå¾©</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â‰¡</div>
                    <div class="guide-name">#tag</div>
                    <div class="guide-desc">è¤‡æ•°è¦ç´ ã®å…±é€šå±æ€§</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â§‰</div>
                    <div class="guide-name">#ref</div>
                    <div class="guide-desc">ä»–ã®ãƒãƒ¼ãƒˆãƒ»æœ¬ã¨ã®æ¥ç¶š</div>
                </div>
                <div class="guide-item">
                    <div class="guide-symbol">â‡„</div>
                    <div class="guide-name">#compare</div>
                    <div class="guide-desc">å¯¾ç«‹ãƒ»æ¯”è¼ƒãƒ»é¸æŠ</div>
                </div>
            </div>
        </div>

        <div class="search-filter">
            <h3>ğŸ” æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼</h3>
            <input type="text" class="search-input" placeholder="ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚„ã‚¿ã‚°ã§æ¤œç´¢..." id="searchInput">
            <div class="filter-tags" id="filterTags">
                <div class="filter-tag" data-tag="core">core</div>
                <div class="filter-tag" data-tag="flow">flow</div>
                <div class="filter-tag" data-tag="block">block</div>
                <div class="filter-tag" data-tag="highlight">highlight</div>
                <div class="filter-tag" data-tag="loop">loop</div>
                <div class="filter-tag" data-tag="learning">learning</div>
                <div class="filter-tag" data-tag="habits">habits</div>
                <div class="filter-tag" data-tag="productivity">productivity</div>
            </div>
        </div>

        <div class="post-composer">
            <h3>âœï¸ æ–°ã—ã„ãƒãƒ¼ãƒˆã‚’ä½œæˆ</h3>
            
            <!-- ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»OCRæ©Ÿèƒ½ -->
            <div class="ocr-section">
                <h4>ğŸ“· æ‰‹æ›¸ããƒ¡ãƒ¢ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ (ãƒ‡ãƒ¢)</h4>
                <div class="upload-area" id="uploadArea">
                    <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    <div class="upload-content">
                        <div class="upload-icon">ğŸ“¸</div>
                        <p>ç”»åƒã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã€ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>
                        <small>æ‰‹æ›¸ããƒ¡ãƒ¢ã‚„è¨˜å·ã‚’è‡ªå‹•ã§ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã—ã¾ã™</small>
                    </div>
                </div>
                <div class="ocr-result" id="ocrResult" style="display: none;">
                    <h5>èªè­˜çµæœ:</h5>
                    <div class="ocr-text" id="ocrText"></div>
                    <button class="apply-ocr-btn" onclick="applyOcrText()">ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«åæ˜ </button>
                </div>
            </div>
            
            <div class="symbol-toolbar">
                <button class="symbol-btn" data-symbol="â—">â— core</button>
                <button class="symbol-btn" data-symbol="â†’">â†’ flow</button>
                <button class="symbol-btn" data-symbol="â–¢">â–¢ block</button>
                <button class="symbol-btn" data-symbol="â˜…">â˜… highlight</button>
                <button class="symbol-btn" data-symbol="â†º">â†º loop</button>
                <button class="symbol-btn" data-symbol="â‰¡">â‰¡ tag</button>
                <button class="symbol-btn" data-symbol="â§‰">â§‰ ref</button>
                <button class="symbol-btn" data-symbol="â‡„">â‡„ compare</button>
            </div>
            <textarea class="post-input" id="postInput" placeholder="è¨˜å·ã‚„ã‚¿ã‚°ã‚’ä½¿ã£ã¦æ€è€ƒã‚’æ•´ç†ã—ã¦ã¿ã¾ã—ã‚‡ã†...

ğŸ”„ è‡ªå‹•å¤‰æ›æ©Ÿèƒ½ï¼š
#core â†’ â—ã€€#flow â†’ â†’ã€€#block â†’ â–¢ã€€#highlight â†’ â˜…
#loop â†’ â†ºã€€#tag â†’ â‰¡ã€€#ref â†’ â§‰ã€€#compare â†’ â‡„

ä¾‹:
#block ç¿’æ…£åŒ–ã®å£
ã€€#core ã‚„ã‚‹æ°—ãŒç¶šã‹ãªã„
ã€€#flow ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³æ›²ç·šã‚’çŸ¥ã‚‹
ã€€#loop å¤±æ•—ã—ãŸè¨˜éŒ²ã‚’è¦‹ç›´ã™
ã€€#highlight é”æˆç‡ã‚’æ•°å€¤åŒ–ã—ã¦ã¿ã‚‹
ã€€#ref ã€Œç¿’æ…£ã®åŠ›ã€ç¬¬4ç« "></textarea>
            <input type="text" class="tag-input" id="tagInput" placeholder="ã‚¿ã‚°ã‚’å…¥åŠ› (ä¾‹: #ç¿’æ…£ #å­¦ç¿’ #ç”Ÿç”£æ€§)">
            <button class="post-btn" onclick="createPost()">æŠ•ç¨¿ã™ã‚‹</button>
        </div>

        <div class="posts" id="posts">
            <!-- ã‚µãƒ³ãƒ—ãƒ«æŠ•ç¨¿ -->
            <div class="post">
                <div class="post-header">
                    <div class="post-user">æ€è€ƒæ•´ç†ãƒã‚¹ã‚¿ãƒ¼</div>
                    <div class="post-time">5åˆ†å‰</div>
                </div>
                <div class="post-content">â–¢å­¦ç¿’åŠ¹ç‡åŒ–
ã€€â—é›†ä¸­åŠ›ãŒç¶šã‹ãªã„å•é¡Œ
ã€€â†’ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯å°å…¥
ã€€â˜…25åˆ†é›†ä¸­â†’5åˆ†ä¼‘æ†©ãŒåŠ¹æœçš„
ã€€â†ºé€±æœ«ã«æŒ¯ã‚Šè¿”ã‚Šã‚’ã™ã‚‹
ã€€â§‰ã€Œé›†ä¸­åŠ›ã€æœ¬ç”°ç›´ä¹‹ ç¬¬2ç« 
ã€€
A â‡„ B ã®æ¯”è¼ƒ
ã€€é•·æ™‚é–“å­¦ç¿’ â‡„ çŸ­æ™‚é–“é›†ä¸­
ã€€â˜…çŸ­æ™‚é–“é›†ä¸­ã®æ–¹ãŒè¨˜æ†¶å®šç€ç‡UP</div>
                <div class="post-tags">
                    <div class="tag">#learning</div>
                    <div class="tag">#productivity</div>
                    <div class="tag">#core</div>
                    <div class="tag">#flow</div>
                </div>
            </div>

            <div class="post">
                <div class="post-header">
                    <div class="post-user">ãƒ©ã‚¤ãƒ•ãƒãƒƒã‚«ãƒ¼</div>
                    <div class="post-time">1æ™‚é–“å‰</div>
                </div>
                <div class="post-content">â–¢æœã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³æ”¹å–„
ã€€â—èµ·åºŠæ™‚é–“ãŒãƒãƒ©ãƒãƒ©
ã€€â†’ã‚¢ãƒ©ãƒ¼ãƒ æ™‚é–“ã‚’å›ºå®š
ã€€â†’å‰æ—¥ã®æº–å‚™ã‚’å……å®Ÿã•ã›ã‚‹
ã€€â˜…èµ·åºŠå¾Œã®æ°´åˆ†è£œçµ¦ãŒé‡è¦
ã€€â†ºæœˆæœ«ã«åŠ¹æœæ¸¬å®š
ã€€
â‰¡å…±é€šç‚¹ï¼šç¶™ç¶šãŒéµ
â‰¡ã‚¿ã‚°ï¼š#morning #routine #health</div>
                <div class="post-tags">
                    <div class="tag">#habits</div>
                    <div class="tag">#morning</div>
                    <div class="tag">#health</div>
                    <div class="tag">#block</div>
                </div>
            </div>

            <div class="post">
                <div class="post-header">
                    <div class="post-user">èª­æ›¸å¥½ã</div>
                    <div class="post-time">3æ™‚é–“å‰</div>
                </div>
                <div class="post-content">â–¢èª­æ›¸ãƒ¡ãƒ¢è¡“
ã€€â—èª­ã‚“ã å†…å®¹ã‚’å¿˜ã‚Œã¦ã—ã¾ã†
ã€€â†’èª­æ›¸ãƒãƒ¼ãƒˆã«è¨˜å·ã§æ•´ç†
ã€€â˜…é‡è¦ç®‡æ‰€ã¯â—ãƒãƒ¼ã‚¯ã§å¼·èª¿
ã€€â§‰ä»–ã®æœ¬ã¨ã®é–¢é€£æ€§ã‚’â†’ã§ç¹‹ã
ã€€â†ºæœˆ1å›ã§ãƒãƒ¼ãƒˆã‚’è¦‹ç›´ã—
ã€€
ãƒ‡ã‚¸ã‚¿ãƒ« â‡„ ã‚¢ãƒŠãƒ­ã‚°
ã€€â˜…ã‚¢ãƒŠãƒ­ã‚°ã®æ–¹ãŒè¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„</div>
                <div class="post-tags">
                    <div class="tag">#reading</div>
                    <div class="tag">#notes</div>
                    <div class="tag">#memory</div>
                    <div class="tag">#ref</div>
                    <div class="tag">#compare</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let posts = [];
        let activeFilters = new Set();
        let currentOcrText = '';

        // ã‚¿ã‚°ã‹ã‚‰è¨˜å·ã¸ã®å¤‰æ›ãƒãƒƒãƒ—
        const tagToSymbolMap = {
            '#core': 'â—',
            '#flow': 'â†’',
            '#block': 'â–¢',
            '#highlight': 'â˜…',
            '#loop': 'â†º',
            '#tag': 'â‰¡',
            '#ref': 'â§‰',
            '#compare': 'â‡„'
        };

        // OCRæ©Ÿèƒ½ã®åˆæœŸåŒ–
        function initOCR() {
            const uploadArea = document.getElementById('uploadArea');
            const imageInput = document.getElementById('imageInput');

            // ã‚¯ãƒªãƒƒã‚¯ã§ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
            uploadArea.addEventListener('click', () => {
                imageInput.click();
            });

            // ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
            uploadArea.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadArea.classList.add('dragover');
            });

            uploadArea.addEventListener('dragleave', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
            });

            uploadArea.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadArea.classList.remove('dragover');
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    handleImageFile(files[0]);
                }
            });

            // ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
            imageInput.addEventListener('change', (e) => {
                if (e.target.files.length > 0) {
                    handleImageFile(e.target.files[0]);
                }
            });
        }

        // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã®å‡¦ç†ï¼ˆãƒ‡ãƒ¢ç‰ˆï¼‰
        function handleImageFile(file) {
            if (!file.type.startsWith('image/')) {
                alert('ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠã—ã¦ãã ã•ã„');
                return;
            }

            // ãƒ‡ãƒ¢ç”¨ã®ã‚µãƒ³ãƒ—ãƒ«ãƒ†ã‚­ã‚¹ãƒˆ
            const sampleOcrTexts = [
                'ä»¥ä¸‹ãƒ†ãƒ³ãƒ—ãƒ¬',
                'â— ä»Šæ—¥ã®ã‚¿ã‚¹ã‚¯\nâ†’ è³‡æ–™ä½œæˆ\nâ†’ ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°æº–å‚™\nâ˜… é‡è¦ï¼šæ˜æ—¥ã¾ã§ã«å®Œäº†',
                'â–¢ èª­æ›¸ãƒ¡ãƒ¢\nâ— ç¿’æ…£ã®åŠ›\nâ†’ å°ã•ãªå¤‰åŒ–ãŒå¤§ããªçµæœã‚’ç”Ÿã‚€\nâ†º 21æ—¥é–“ç¶™ç¶šã—ã¦ã¿ã‚‹',
                'â–¢ ã‚¢ã‚¤ãƒ‡ã‚¢æ•´ç†\nâ— æ–°ã—ã„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¡ˆ\nâ†’ å¸‚å ´èª¿æŸ»ãŒå¿…è¦\nâ§‰ ç«¶åˆåˆ†æã‚‚å‚è€ƒã«'
            ];

            const randomText = sampleOcrTexts[Math.floor(Math.random() * sampleOcrTexts.length)];
            performDemoOCR(randomText);
        }

        // ãƒ‡ãƒ¢ç‰ˆOCRå®Ÿè¡Œ
        function performDemoOCR(text) {
            const ocrResult = document.getElementById('ocrResult');
            const ocrText = document.getElementById('ocrText');
            
            ocrResult.style.display = 'block';
            ocrText.innerHTML = '<div class="processing">ç”»åƒã‚’è§£æä¸­</div>';

            // ãƒ‡ãƒ¢ç”¨ã®é…å»¶å‡¦ç†
            setTimeout(() => {
                ocrText.innerHTML = '<div class="processing">ãƒ†ã‚­ã‚¹ãƒˆèªè­˜ä¸­ 50%</div>';
            }, 500);

            setTimeout(() => {
                ocrText.innerHTML = '<div class="processing">ãƒ†ã‚­ã‚¹ãƒˆèªè­˜ä¸­ 100%</div>';
            }, 1000);

            setTimeout(() => {
                currentOcrText = text;
                ocrText.textContent = text;
                showMessage('OCRå‡¦ç†ãŒå®Œäº†ã—ã¾ã—ãŸï¼ˆãƒ‡ãƒ¢ç‰ˆï¼‰');
            }, 1500);
        }

        // OCRãƒ†ã‚­ã‚¹ãƒˆã‚’ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã«é©ç”¨
        function applyOcrText() {
            const postInput = document.getElementById('postInput');
            const currentText = postInput.value;
            
            if (currentText.trim() === '') {
                postInput.value = currentOcrText;
            } else {
                postInput.value = currentText + '\n\n' + currentOcrText;
            }
            
            // è‡ªå‹•å¤‰æ›ã‚’å®Ÿè¡Œ
            autoConvertTags(postInput);
            
            // ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å½“ã¦ã‚‹
            postInput.focus();
            postInput.scrollTop = postInput.scrollHeight;
            
            showMessage('OCRãƒ†ã‚­ã‚¹ãƒˆãŒåæ˜ ã•ã‚Œã¾ã—ãŸ');
        }

        // è‡ªå‹•å¤‰æ›æ©Ÿèƒ½
        function autoConvertTags(input) {
            let text = input.value;
            let cursorPos = input.selectionStart;
            let converted = false;
            let offsetAdjustment = 0;

            // å„ã‚¿ã‚°ã‚’è¨˜å·ã«å¤‰æ›
            Object.entries(tagToSymbolMap).forEach(([tag, symbol]) => {
                const regex = new RegExp(tag.replace('#', '\\#'), 'gi');
                const matches = Array.from(text.matchAll(regex));
                
                matches.forEach(match => {
                    const matchStart = match.index;
                    const matchEnd = matchStart + match[0].length;
                    
                    // ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚ˆã‚Šå‰ã®å¤‰æ›ã®å ´åˆã€ã‚ªãƒ•ã‚»ãƒƒãƒˆã‚’èª¿æ•´
                    if (matchEnd <= cursorPos) {
                        offsetAdjustment += symbol.length - tag.length;
                    }
                    
                    converted = true;
                });
                
                text = text.replace(regex, symbol);
            });

            if (converted) {
                input.value = text;
                // ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’èª¿æ•´
                input.setSelectionRange(cursorPos + offsetAdjustment, cursorPos + offsetAdjustment);
                
                // å¤‰æ›ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
                input.style.backgroundColor = '#e8f4fd';
                setTimeout(() => {
                    input.style.backgroundColor = '';
                }, 300);
            }
        }

        // è¨˜å·ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯å‡¦ç†
        function addSymbol(symbol) {
            const postInput = document.getElementById('postInput');
            const cursorPos = postInput.selectionStart;
            const textBefore = postInput.value.substring(0, cursorPos);
            const textAfter = postInput.value.substring(cursorPos);
            
            postInput.value = textBefore + symbol + ' ' + textAfter;
            postInput.focus();
            postInput.setSelectionRange(cursorPos + symbol.length + 1, cursorPos + symbol.length + 1);
        }

        // æŠ•ç¨¿ä½œæˆ
        function createPost() {
            const postInput = document.getElementById('postInput');
            const tagInput = document.getElementById('tagInput');
            const content = postInput.value.trim();
            const tags = tagInput.value.trim();

            if (!content) {
                alert('æŠ•ç¨¿å†…å®¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                return;
            }
const post = {
            id: Date.now(),
            user: 'ã‚ãªãŸ',
            content: content,
            tags: tags ? tags.split(' ').filter(tag => tag.startsWith('#')) : [],
            timestamp: new Date(),
            time: 'ä»Š'
        };

        posts.unshift(post);
        renderPosts();
        
        // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
        postInput.value = '';
        tagInput.value = '';
        
        // OCRçµæœã‚‚ã‚¯ãƒªã‚¢
        const ocrResult = document.getElementById('ocrResult');
        ocrResult.style.display = 'none';
        currentOcrText = '';
        
        showMessage('æŠ•ç¨¿ã—ã¾ã—ãŸï¼');
    }

    // æŠ•ç¨¿ã‚’è¡¨ç¤º
    function renderPosts() {
        const postsContainer = document.getElementById('posts');
        const searchTerm = document.getElementById('searchInput').value.toLowerCase();
        
        // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
        let filteredPosts = posts.filter(post => {
            // æ¤œç´¢æ¡ä»¶ã§ãƒ•ã‚£ãƒ«ã‚¿
            const matchesSearch = !searchTerm || 
                post.content.toLowerCase().includes(searchTerm) ||
                post.tags.some(tag => tag.toLowerCase().includes(searchTerm));
            
            // ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ•ã‚£ãƒ«ã‚¿ã§ãƒ•ã‚£ãƒ«ã‚¿
            const matchesFilter = activeFilters.size === 0 || 
                Array.from(activeFilters).some(filter => 
                    post.tags.some(tag => tag.toLowerCase().includes(filter.toLowerCase())) ||
                    post.content.toLowerCase().includes(filter.toLowerCase())
                );
            
            return matchesSearch && matchesFilter;
        });

        // æ—¢å­˜ã®ã‚«ã‚¹ã‚¿ãƒ æŠ•ç¨¿ã‚’ä¿æŒ
        const customPosts = Array.from(postsContainer.children).filter(post => 
            post.querySelector('.post-user').textContent === 'ã‚ãªãŸ'
        );

        // ã‚µãƒ³ãƒ—ãƒ«æŠ•ç¨¿
        const samplePosts = `
            <div class="post">
                <div class="post-header">
                    <div class="post-user">æ€è€ƒæ•´ç†ãƒã‚¹ã‚¿ãƒ¼</div>
                    <div class="post-time">5åˆ†å‰</div>
                </div>
                <div class="post-content">â–¢å­¦ç¿’åŠ¹ç‡åŒ–
ã€€â—é›†ä¸­åŠ›ãŒç¶šã‹ãªã„å•é¡Œ
ã€€â†’ãƒãƒ¢ãƒ‰ãƒ¼ãƒ­ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯å°å…¥
ã€€â˜…25åˆ†é›†ä¸­â†’5åˆ†ä¼‘æ†©ãŒåŠ¹æœçš„
ã€€â†ºé€±æœ«ã«æŒ¯ã‚Šè¿”ã‚Šã‚’ã™ã‚‹
ã€€â§‰ã€Œé›†ä¸­åŠ›ã€æœ¬ç”°ç›´ä¹‹ ç¬¬2ç« 
ã€€
A â‡„ B ã®æ¯”è¼ƒ
ã€€é•·æ™‚é–“å­¦ç¿’ â‡„ çŸ­æ™‚é–“é›†ä¸­
ã€€â˜…çŸ­æ™‚é–“é›†ä¸­ã®æ–¹ãŒè¨˜æ†¶å®šç€ç‡UP</div>
                <div class="post-tags">
                    <div class="tag">#learning</div>
                    <div class="tag">#productivity</div>
                    <div class="tag">#core</div>
                    <div class="tag">#flow</div>
                </div>
            </div>

            <div class="post">
                <div class="post-header">
                    <div class="post-user">ãƒ©ã‚¤ãƒ•ãƒãƒƒã‚«ãƒ¼</div>
                    <div class="post-time">1æ™‚é–“å‰</div>
                </div>
                <div class="post-content">â–¢æœã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³æ”¹å–„
ã€€â—èµ·åºŠæ™‚é–“ãŒãƒãƒ©ãƒãƒ©
ã€€â†’ã‚¢ãƒ©ãƒ¼ãƒ æ™‚é–“ã‚’å›ºå®š
ã€€â†’å‰æ—¥ã®æº–å‚™ã‚’å……å®Ÿã•ã›ã‚‹
ã€€â˜…èµ·åºŠå¾Œã®æ°´åˆ†è£œçµ¦ãŒé‡è¦
ã€€â†ºæœˆæœ«ã«åŠ¹æœæ¸¬å®š
ã€€
â‰¡å…±é€šç‚¹ï¼šç¶™ç¶šãŒéµ
â‰¡ã‚¿ã‚°ï¼š#morning #routine #health</div>
                <div class="post-tags">
                    <div class="tag">#habits</div>
                    <div class="tag">#morning</div>
                    <div class="tag">#health</div>
                    <div class="tag">#block</div>
                </div>
            </div>

            <div class="post">
                <div class="post-header">
                    <div class="post-user">èª­æ›¸å¥½ã</div>
                    <div class="post-time">3æ™‚é–“å‰</div>
                </div>
                <div class="post-content">â–¢èª­æ›¸ãƒ¡ãƒ¢è¡“
ã€€â—èª­ã‚“ã å†…å®¹ã‚’å¿˜ã‚Œã¦ã—ã¾ã†
ã€€â†’èª­æ›¸ãƒãƒ¼ãƒˆã«è¨˜å·ã§æ•´ç†
ã€€â˜…é‡è¦ç®‡æ‰€ã¯â—ãƒãƒ¼ã‚¯ã§å¼·èª¿
ã€€â§‰ä»–ã®æœ¬ã¨ã®é–¢é€£æ€§ã‚’â†’ã§ç¹‹ã
ã€€â†ºæœˆ1å›ã§ãƒãƒ¼ãƒˆã‚’è¦‹ç›´ã—
ã€€
ãƒ‡ã‚¸ã‚¿ãƒ« â‡„ ã‚¢ãƒŠãƒ­ã‚°
ã€€â˜…ã‚¢ãƒŠãƒ­ã‚°ã®æ–¹ãŒè¨˜æ†¶ã«æ®‹ã‚Šã‚„ã™ã„</div>
                <div class="post-tags">
                    <div class="tag">#reading</div>
                    <div class="tag">#notes</div>
                    <div class="tag">#memory</div>
                    <div class="tag">#ref</div>
                    <div class="tag">#compare</div>
                </div>
            </div>
        `;

        // æ–°ã—ã„æŠ•ç¨¿ã®HTMLç”Ÿæˆ
        const newPostsHTML = filteredPosts.map(post => `
            <div class="post">
                <div class="post-header">
                    <div class="post-user">${post.user}</div>
                    <div class="post-time">${post.time}</div>
                </div>
                <div class="post-content">${post.content}</div>
                <div class="post-tags">
                    ${post.tags.map(tag => `<div class="tag">${tag}</div>`).join('')}
                </div>
            </div>
        `).join('');

        postsContainer.innerHTML = newPostsHTML + samplePosts;
    }

    // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¿ã‚°ã®å‡¦ç†
    function toggleFilter(tagElement) {
        const tag = tagElement.dataset.tag;
        
        if (activeFilters.has(tag)) {
            activeFilters.delete(tag);
            tagElement.classList.remove('active');
        } else {
            activeFilters.add(tag);
            tagElement.classList.add('active');
        }
        
        renderPosts();
    }

    // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    function showMessage(text) {
        const message = document.createElement('div');
        message.className = 'message';
        message.textContent = text;
        document.body.appendChild(message);
        
        setTimeout(() => {
            message.classList.add('show');
        }, 100);
        
        setTimeout(() => {
            message.classList.remove('show');
            setTimeout(() => {
                document.body.removeChild(message);
            }, 300);
        }, 2000);
    }

    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
    document.addEventListener('DOMContentLoaded', function() {
        // OCRæ©Ÿèƒ½ã®åˆæœŸåŒ–
        initOCR();
        
        // è¨˜å·ãƒœã‚¿ãƒ³ã®ã‚¯ãƒªãƒƒã‚¯
        document.querySelectorAll('.symbol-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const symbol = btn.dataset.symbol;
                addSymbol(symbol);
            });
        });

        // è‡ªå‹•å¤‰æ›æ©Ÿèƒ½
        const postInput = document.getElementById('postInput');
        postInput.addEventListener('input', () => {
            autoConvertTags(postInput);
        });

        // æ¤œç´¢æ©Ÿèƒ½
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('input', renderPosts);

        // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚¿ã‚°
        document.querySelectorAll('.filter-tag').forEach(tag => {
            tag.addEventListener('click', () => {
                toggleFilter(tag);
            });
        });

        // æŠ•ç¨¿ã‚¿ã‚°ã®ã‚¯ãƒªãƒƒã‚¯ï¼ˆæ¤œç´¢ã«è¿½åŠ ï¼‰
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('tag')) {
                const tagText = e.target.textContent;
                const searchInput = document.getElementById('searchInput');
                searchInput.value = tagText;
                renderPosts();
                searchInput.focus();
            }
        });

        // åˆæœŸè¡¨ç¤º
        renderPosts();
    });
    </script>
</body>
</html>
